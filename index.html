<!DOCTYPE <!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="stylesheet" type="text/css" href=./static/css/bootstrap.css>
    <link rel="stylesheet" type="text/css" media="screen" href=./static/css/style.css>
    <style>
      #map {
        height: 100%;
      }
    </style>

    <!-- insert google analytics here? Meh. -->
	<title>ISS Tracker</title>
</head>
<body>
	<nav class="container">
		<!-- collapsed navbar for small screen -->
		<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
			<div class="container-fluid" id="navfluid">
	        <div class="navbar-header">
	            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigationbar">
	            <span class="sr-only">Toggle navigation</span>
	             <span class="icon-bar"></span>
	             <span class="icon-bar"></span>
	             <span class="icon-bar"></span>
	            </button>
	        </div>
			</div>

			<!-- Full navbar -->
			<div class="navbar-collapse collapse" id="navigationbar">
			  <ul class="nav navbar-nav navbar-left">
            	<li><a href="http://margaretsy.com">Home</a></li>
				<li><a href="http://margaretsy.com/projects/">Projects</a></li>
          	  </ul>
	      	</div>
		</nav>

		<!-- Main -->
		<div class="row">
			<div class="col-md-12 text-center">
				<h1>Track the International Space Station</h1>
					<br>
					<p>My implementation of an <a href="http://isstracker.com">ISS Tracker</a> using data from <a href="http://open-notify.org/">Open Notify</a>.</p>
					<p>If you like space things, check out the NASA Johnson Space Center <a href="https://www.youtube.com/user/ReelNASA">YouTube channel.</a></p>
					<p><a href="http://www.ustream.tv/channel/live-iss-stream">ISS Livestream</a></p>				
			</div>
		</div>
		<div class="row">
			<div class="col-md-6">
				<h3>Find ISS Flyovers</h3>
					<p>For the real deal, check out <a href="http://spotthestation.nasa.gov/">NASA's Spot the Station site.</a></p>
					<p>Note that Spot the Station only seems to display morning passes. I haven't played enough Kerbal Space Program to figure out why the times are slightly different, but STS pass predictions usually start 5 to 10 minutes later and are shorter than Open-Notify's. I suspect they start counting "visible" at a higher angle from the horizon than Open Notify does.</p>
					<form>
						<div class="form-group">
							<label for="flyoverAddress">Where are you?</label>
	    					<input type="address" class="form-control" id="flyoverAddress" placeholder="City, State, Country">
						</div>
					</form>
					<button type="submit" class="btn btn-default" id="getLocation">Get flyover times</button>
					<br><br>
				
					<table class="table table-condensed table-responsive table-hover" id="passTimes">
					</table>
					<p id="tzInfo"></p>
					<table class="table table-condensed table-responsive" id="key">
						<tr>
							<th>Key</th>
						</tr>
						<tr>
							<td class="success"><small>Nighttime</small>
						</tr>
						<tr>
							<td class="warning"><small>Before sunrise</small></td>
						</tr>
						<tr>
							<td class="danger"><small>Daylight</small></td>
						</tr>
					</table>
				<h4>Issues</h4>
				<ul>
					<li>Flyover times load out of order from async calls. Gotta do <a href="http://stackoverflow.com/questions/24111578/how-can-i-order-the-results-of-several-async-jquery-queries">this</a>. Which is probably gonna take a little awhile because what are promises.</li>
					<li>I dunno how I feel about this layout. On mobile the map takes up so much of the screen it's a little hard to scroll back up, and this list is displayed before the current location map.</li>
					<li>Add weather info.</li>
					<li>Hide the table key if the table isn't populated yet.</li>
					<li>Need to handle error when open-notify vomits 500 error XML and getJSON fails silently. Tried fixing the error handling but until my <a href="https://github.com/open-notify/Open-Notify-API/pull/7">pull request</a> is merged, will need to do something like <a href="http://stackoverflow.com/questions/1740218/error-handling-in-getjson-calls">this</a>.</li>
				</ul>

			</div>
			<div class="col-md-6">
				<h3>Current Location</h3>
					<button type="button" class="btn btn-primary btn-lg" id="updateMap">Update Map</button>
					<br>

					<div id="map"></div>
			</div>
		</div>
	</nav>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script type="text/javascript" src=./static/js/bootstrap.min.js></script>
	<script type="text/javascript" src=./static/js/suncalc.js></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.1/moment.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.0/moment-timezone-with-data.min.js"></script>
	<script type="text/javascript" src=./static/js/app.js></script>
	<!-- Key is set to only accept requests from this site. -->
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC2lYc_Eb262K1WpruhiZU18Db2Dapm21o&callback=getIssPosition" async defer></script>



</body>
</html>